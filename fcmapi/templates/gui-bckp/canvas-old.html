<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>OpenFCM webapi</title>
  <meta name="description" content="OpenFCM webapi">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
  
  <style>    
    circle.node {
      stroke: #fff;
      stroke-width: 0.5px;
    }
    line.link {
      stroke: #999;
      stroke-opacity: .6;
    }
  </style>
</head>

<body>
    <div id="chart"></div>
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script>
        
        var jsonString = '{"directed": true, "multigraph": false, "graph": {}, "nodes": [{"name": 0, "id": 0}, {"name": 1, "id": 1}, {"name": 2, "id": 2}, {"name": 3, "id": 3}, {"name": 4, "id": 4}, {"name": 5, "id": 5}, {"name": 6, "id": 6}, {"name": 7, "id": 7}, {"name": 8, "id": 8}, {"name": 9, "id": 9}, {"name": 10, "id": 10}, {"name": 11, "id": 11}, {"name": 12, "id": 12}, {"name": 13, "id": 13}, {"name": 14, "id": 14}], "links": [{"source": 0, "target": 1}, {"source": 0, "target": 2}, {"source": 0, "target": 3}, {"source": 0, "target": 4}, {"source": 0, "target": 5}, {"source": 1, "target": 2}, {"source": 1, "target": 3}, {"source": 1, "target": 4}, {"source": 1, "target": 5}, {"source": 2, "target": 3}, {"source": 2, "target": 4}, {"source": 2, "target": 5}, {"source": 3, "target": 4}, {"source": 3, "target": 5}, {"source": 4, "target": 5}, {"source": 5, "target": 6}, {"source": 6, "target": 7}, {"source": 7, "target": 8}, {"source": 8, "target": 9}, {"source": 9, "target": 10}, {"source": 9, "target": 11}, {"source": 9, "target": 12}, {"source": 9, "target": 13}, {"source": 9, "target": 14}, {"source": 10, "target": 11}, {"source": 10, "target": 12}, {"source": 10, "target": 13}, {"source": 10, "target": 14}, {"source": 11, "target": 12}, {"source": 11, "target": 13}, {"source": 11, "target": 14}, {"source": 12, "target": 13}, {"source": 12, "target": 14}, {"source": 13, "target": 14}]}';
        var json = JSON.parse(jsonString);
        
        var w = 400,
            h = 400,
            fill = d3.scale.category20();
        
        var vis = d3.select("#chart")
          .append("svg:svg")
            .attr("width", w)
            .attr("height", h);
        
        var force = d3.layout.force()
          .charge(-120)
          .linkDistance(30)
          .nodes(json.nodes)
          .links(json.links)
          .size([w, h])
          .start();

        var link = vis.selectAll("line.link")
          .data(json.links)
        .enter().append("svg:line")
          .attr("class", "link")
          .style("stroke-width", function(d) { return Math.sqrt(d.value); })
          .attr("x1", function(d) { return d.source.x; })
          .attr("y1", function(d) { return d.source.y; })
          .attr("x2", function(d) { return d.target.x; })
          .attr("y2", function(d) { return d.target.y; });

        var node = vis.selectAll("circle.node")
          .data(json.nodes)
        .enter().append("svg:circle")
          .attr("class", "node")
          .attr("cx", function(d) { return d.x; })
          .attr("cy", function(d) { return d.y; })
          .attr("r", 5)
          .style("fill", function(d) { return fill(d.group); })
          .call(force.drag);

        node.append("svg:title")
          .text(function(d) { return d.name; });

        vis.style("opacity", 1e-6)
        .transition()
          .duration(1000)
          .style("opacity", 1);

        force.on("tick", function() {
        link.attr("x1", function(d) { return d.source.x; })
            .attr("y1", function(d) { return d.source.y; })
            .attr("x2", function(d) { return d.target.x; })
            .attr("y2", function(d) { return d.target.y; });

        node.attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; });
        });

    </script>
</body>
</html>